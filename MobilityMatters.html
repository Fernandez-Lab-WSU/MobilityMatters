<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Projecting Human Mobility and Disease Data to Support Decision-Making</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="mobilitymatters_files/libs/clipboard/clipboard.min.js"></script>
<script src="mobilitymatters_files/libs/quarto-html/quarto.js"></script>
<script src="mobilitymatters_files/libs/quarto-html/popper.min.js"></script>
<script src="mobilitymatters_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="mobilitymatters_files/libs/quarto-html/anchor.min.js"></script>
<link href="mobilitymatters_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="mobilitymatters_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="mobilitymatters_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="mobilitymatters_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="mobilitymatters_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="mobilitymatters_files/libs/quarto-contrib/intersection-observer-polyfill-1.0.0/intersection-observer.js"></script>
<script src="mobilitymatters_files/libs/quarto-contrib/scrollama-3.2.0/scrollama.min.js"></script>
<script src="mobilitymatters_files/libs/quarto-contrib/closeread-0.1.0/closeread.js"></script>
<script type="module" src="mobilitymatters_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="mobilitymatters_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<meta cr-debug-mode="false">
<meta cr-remove-header-space="true">


<link rel="stylesheet" href="_extensions/qmd-lab/closeread/closeread.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-full">

<main class="content column-page" id="quarto-document-content">
      <!-- user-provided yaml closeread style options -->
      <style>
        :root {
          --cr-section-background-color: #114B5F;
        }
      </style>
    

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Projecting Human Mobility and Disease Data to Support Decision-Making</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="mobility-matters" class="level1">
<h1>Mobility Matters</h1>
<pre><code>  narrative-font-family: 'Monserrat'
  poem-font-family: 'Monserrat'</code></pre>
<section id="people-moves-in-buenos-aires" class="level2">
<h2 class="anchored" data-anchor-id="people-moves-in-buenos-aires">People moves in Buenos Aires</h2>
<div class="cr-section cr-column-screen overlay-center">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-myimage">
<div class="narrative">
<p>The emergence and persistence of vector-borne diseases is influenced by both ecological and human factors.</p>
</div>
</div>
<div class="trigger">
<div class="narrative">
<p>Human-to-human contact is a key factor in the spread of virus as COVID-19, especially in cities with high population density.</p>
</div>
</div>
<div class="trigger">
<div class="narrative">
<p>Therefore, in 2020, when the pandemic of 2020 was declared, many governments worldwide implemented measures such as quarantine.</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-myimage" class="sticky">
<p><img src="img/subte.jpg" class="img-fluid"></p>
</div>
</div>
</div>
</div>
</section>
<section id="what-data-can-we-use-to-analyze-citizen-mobility-in-the-territory" class="level2">
<h2 class="anchored" data-anchor-id="what-data-can-we-use-to-analyze-citizen-mobility-in-the-territory">What data can we use to analyze citizen mobility in the territory?</h2>
<div class="cr-section cr-column-screen sidebar-right">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-meta">
<div class="narrative">
<p>Meta/Facebook Mobility Data is available to researchers through the <strong>Data4Good</strong> Partner Program</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-meta">
<div class="narrative">
<p>You can read more about it in the <a href="https://dataforgood.facebook.com/"><code>data4Good</code> WebPage</a> .</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-meta" class="sticky">
<p><img src="img/meta_webpage.png" class="img-fluid"></p>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pay Attention
</div>
</div>
<div class="callout-body-container callout-body">
<p>Using callouts is an effective way to highlight content that your reader give special consideration or attention.</p>
</div>
</div>
<div class="cr-section cr-column-screen overlay-center">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-data">
<div class="narrative">
<p>Mobile devices with a Meta app installed can capture the latitude and longitude of users’ locations at a specific time.</p>
</div>
</div>
<div class="trigger">
<div class="narrative">
<p>Measures are applied to the data to ensure privacy and maintain anonymity.</p>
</div>
</div>
<div class="trigger">
<div class="narrative">
<p>Using each user’s location as a reference, the number of users is expressed as the sum of those sharing the same map tile. How does this work?</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-data" class="sticky">
<p><img src="img/mujer_celular.jpg" class="img-fluid"></p>
</div>
</div>
</div>
</div>
</section>
<section id="facebook-mobility-data" class="level2">
<h2 class="anchored" data-anchor-id="facebook-mobility-data">Facebook Mobility Data</h2>
<section id="what-data-do-researchers-receive" class="level4">
<h4 class="anchored" data-anchor-id="what-data-do-researchers-receive">What data do researchers receive?</h4>
<p>Our variable of interest is <code>percentage change</code>, which is relative and their values indicates an increase or decrease compared to a baseline value. In this case, the baseline is the number of users from the previous year for the same date and time range.</p>
<div class="columns">
<div id="vcenter" class="column" style="width:60%;">
<ol type="1">
<li><p>Mapped using a <strong>Bing tile architecture</strong> ➡️ users are assigned to individual tiles.</p></li>
<li><p>Data is provided in <strong>8-hour time periods</strong> ( 0hs - 8hs / 8hs - 16hs / 16hs - 0hs ).</p></li>
<li><p>Variable <code>percent_change</code>: relative change in mobility compared to a baseline period.</p></li>
</ol>
</div><div id="vcenter" class="column" style="width:40%;">
<p><img src="img/tiles.jpg" class="img-fluid"></p>
</div>
</div>
<div class="footer">
<p><a href="https://learn.microsoft.com/en-us/bingmaps/articles/bing-maps-tile-system">Bing Maps Tile System</a></p>
</div>
</section>
</section>
<section id="from-quadkeys-to-raster-images" class="level2">
<h2 class="anchored" data-anchor-id="from-quadkeys-to-raster-images">From QuadKeys to raster images</h2>
<div class="cr-section cr-column-screen sidebar-left">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-tiles" data-pan-to="30%,30%" data-scale-by="2">
<div class="narrative">
<p>The <strong>tiles</strong> can have different sizes, producing maps with varying level of detail. El nivel mas simple es el nivel 1, que divide al mapa en cuatro areas iguales</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-tiles" data-pan-to="50%,50%" data-scale-by="1.5">
<div class="narrative">
<p>Each map tile is linked to a value called a QuadKey (in red). The QuadKey provides spatial information based on the level of detail. For example, if a value is associated with QuadKey 1, it represents the area in the northwest corner of the map when divided into four sections. If the QuadKey is 11, it represents the northwest corner again, but this time with the map divided into eight sections.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-tiles" data-pan-to="0%,0%" data-scale-by="1">
<div class="narrative">
<p>Cuanto mas detallado el mapa, los Quadkeys seran mas largos, y las areas representadas mas especificas</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-tiles" class="sticky">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/bing_quadkeys.jpg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<p><strong>QuadKeys</strong> represent a location on a map by encoding its hierarchical spatial position as a sequence of characters.</p>
<div class="footer">
<p><a href="https://learn.microsoft.com/en-us/bingmaps/articles/bing-maps-tile-system">Bing Maps Tile System</a></p>
</div>
<div class="footer">
<p><a href="https://docs.ropensci.org/quadkeyr/"><code>quadkeyr</code> documentation</a></p>
</div>
<div class="footer">
<p>Source: <a href="https://docs.ropensci.org/quadkeyr/articles/facebook_mobility_csvs_to_raster_files.html"><code>quadkeyr</code> documentation - Facebook Mobility Data</a></p>
</div>
</section>
<section id="understanding-the-movement-in-the-map" class="level2">
<h2 class="anchored" data-anchor-id="understanding-the-movement-in-the-map">Understanding the movement in the map</h2>
<div class="cr-section cr-column-screen sidebar-left">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-graphic">
<div class="narrative">
<p>This is Buenos Aires Metropolitan Area.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-graphic">
<div class="narrative">
<p>We overlay one of the generated rasters, specifically the one from a Wednesday afternoon during Phase I of the lockdown in May 2020. Let’s observe that there are various pixel colors. What do they mean? Let’s find it out.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-graphic">
<div class="narrative">
<p>The blue-tone pixels correspond to areas that experienced a decrease in mobility relative to the same period of the previous year. The more intense the color, the more pronounced the change. Let’s see which areas of the city were the most affected.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-graphic">
<div class="narrative">
<p>4</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-graphic" class="sticky">
<p><img src="img/amba.png" class="img-fluid"></p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="171" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 170;"><span id="cb2-171"><a href="#cb2-171" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span></span>
<span id="cb2-172"><a href="#cb2-172" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb2-173"><a href="#cb2-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-174"><a href="#cb2-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-175"><a href="#cb2-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-176"><a href="#cb2-176" aria-hidden="true" tabindex="-1"></a><span class="co">md`Active sticky: ${crActiveSticky}`</span></span>
<span id="cb2-177"><a href="#cb2-177" aria-hidden="true" tabindex="-1"></a><span class="co">md`Trigger progress: ${crTriggerProgress}`</span></span>
<span id="cb2-178"><a href="#cb2-178" aria-hidden="true" tabindex="-1"></a><span class="co">md`Scroll direction: ${crDirection}`</span></span>
<span id="cb2-179"><a href="#cb2-179" aria-hidden="true" tabindex="-1"></a><span class="co">md`Progress Block progress: ${crProgressBlock}`</span></span>
<span id="cb2-180"><a href="#cb2-180" aria-hidden="true" tabindex="-1"></a><span class="co">md`Active trigger: ${crTriggerIndex}`</span></span>
<span id="cb2-181"><a href="#cb2-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-182"><a href="#cb2-182" aria-hidden="true" tabindex="-1"></a><span class="co">L = require("leaflet@1.9.4");</span></span>
<span id="cb2-183"><a href="#cb2-183" aria-hidden="true" tabindex="-1"></a><span class="co">GeoTIFF = require('geotiff@2.0.4');</span></span>
<span id="cb2-184"><a href="#cb2-184" aria-hidden="true" tabindex="-1"></a><span class="co">parseGeoraster = require("georaster@1.6.0");</span></span>
<span id="cb2-185"><a href="#cb2-185" aria-hidden="true" tabindex="-1"></a><span class="co">GeoRasterLayer = require("georaster-layer-for-leaflet@3.10.0");</span></span>
<span id="cb2-186"><a href="#cb2-186" aria-hidden="true" tabindex="-1"></a><span class="co">html`&lt;link href='${resolve('leaflet@1.9.4/dist/leaflet.css')}' rel='stylesheet' /&gt;`;</span></span>
<span id="cb2-187"><a href="#cb2-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-188"><a href="#cb2-188" aria-hidden="true" tabindex="-1"></a><span class="co">container = DOM.element('div', { style: `width:${width/1.5}px;height:${width / 2}px` });</span></span>
<span id="cb2-189"><a href="#cb2-189" aria-hidden="true" tabindex="-1"></a><span class="co">yield container;</span></span>
<span id="cb2-190"><a href="#cb2-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-191"><a href="#cb2-191" aria-hidden="true" tabindex="-1"></a><span class="co">map = L.map(container, {</span></span>
<span id="cb2-192"><a href="#cb2-192" aria-hidden="true" tabindex="-1"></a><span class="co">  center: [-34.6037, -58.3816],</span></span>
<span id="cb2-193"><a href="#cb2-193" aria-hidden="true" tabindex="-1"></a><span class="co">  zoom: 10,</span></span>
<span id="cb2-194"><a href="#cb2-194" aria-hidden="true" tabindex="-1"></a><span class="co">  scrollWheelZoom: false,</span></span>
<span id="cb2-195"><a href="#cb2-195" aria-hidden="true" tabindex="-1"></a><span class="co">});</span></span>
<span id="cb2-196"><a href="#cb2-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-197"><a href="#cb2-197" aria-hidden="true" tabindex="-1"></a><span class="co">function getColor(values) {</span></span>
<span id="cb2-198"><a href="#cb2-198" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &lt; -50) return "#0000FF";</span></span>
<span id="cb2-199"><a href="#cb2-199" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &lt; -40) return "#0040FF";</span></span>
<span id="cb2-200"><a href="#cb2-200" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &lt; -30) return "#0080FF";</span></span>
<span id="cb2-201"><a href="#cb2-201" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &lt; -20) return "#00BFFF";</span></span>
<span id="cb2-202"><a href="#cb2-202" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &lt; -10) return "#00FFFF";</span></span>
<span id="cb2-203"><a href="#cb2-203" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &lt; 1 &amp;&amp; values &gt; -1) return "#FFFFFF"; // white</span></span>
<span id="cb2-204"><a href="#cb2-204" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &gt; 10) return "#FFCC00";</span></span>
<span id="cb2-205"><a href="#cb2-205" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &gt; 20) return "#FF9900";</span></span>
<span id="cb2-206"><a href="#cb2-206" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &gt; 30) return "#FF6600";</span></span>
<span id="cb2-207"><a href="#cb2-207" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &gt; 40) return "#FF3300";</span></span>
<span id="cb2-208"><a href="#cb2-208" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &gt; 50) return "#FF0000";</span></span>
<span id="cb2-209"><a href="#cb2-209" aria-hidden="true" tabindex="-1"></a><span class="co">}</span></span>
<span id="cb2-210"><a href="#cb2-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-211"><a href="#cb2-211" aria-hidden="true" tabindex="-1"></a><span class="co">function getCold(values) {</span></span>
<span id="cb2-212"><a href="#cb2-212" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &lt; -50) return "#0000FF";</span></span>
<span id="cb2-213"><a href="#cb2-213" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &lt; -40) return "#0040FF";</span></span>
<span id="cb2-214"><a href="#cb2-214" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &lt; -30) return "#0080FF";</span></span>
<span id="cb2-215"><a href="#cb2-215" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &lt; -20) return "#00BFFF";</span></span>
<span id="cb2-216"><a href="#cb2-216" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &lt; -10) return "#00FFFF";</span></span>
<span id="cb2-217"><a href="#cb2-217" aria-hidden="true" tabindex="-1"></a><span class="co">  if (values &gt; -1) return "#FFFFFF00"; // transparent</span></span>
<span id="cb2-218"><a href="#cb2-218" aria-hidden="true" tabindex="-1"></a><span class="co">}</span></span>
<span id="cb2-219"><a href="#cb2-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-220"><a href="#cb2-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-221"><a href="#cb2-221" aria-hidden="true" tabindex="-1"></a><span class="co">function mapAmba(lat, lon, zoom, opa, basemap, colorfun){</span></span>
<span id="cb2-222"><a href="#cb2-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-223"><a href="#cb2-223" aria-hidden="true" tabindex="-1"></a><span class="co">L.tileLayer(basemap, {</span></span>
<span id="cb2-224"><a href="#cb2-224" aria-hidden="true" tabindex="-1"></a><span class="co">  attribution: '&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt; contributors'</span></span>
<span id="cb2-225"><a href="#cb2-225" aria-hidden="true" tabindex="-1"></a><span class="co">}).addTo(map);</span></span>
<span id="cb2-226"><a href="#cb2-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-227"><a href="#cb2-227" aria-hidden="true" tabindex="-1"></a><span class="co">const url_to_geotiff_file = 'static/amba_pc_2020-05-13_16.tif';</span></span>
<span id="cb2-228"><a href="#cb2-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-229"><a href="#cb2-229" aria-hidden="true" tabindex="-1"></a><span class="co">{</span></span>
<span id="cb2-230"><a href="#cb2-230" aria-hidden="true" tabindex="-1"></a><span class="co">  fetch(url_to_geotiff_file)</span></span>
<span id="cb2-231"><a href="#cb2-231" aria-hidden="true" tabindex="-1"></a><span class="co">    .then(response =&gt; response.arrayBuffer())</span></span>
<span id="cb2-232"><a href="#cb2-232" aria-hidden="true" tabindex="-1"></a><span class="co">    .then(arrayBuffer =&gt; {</span></span>
<span id="cb2-233"><a href="#cb2-233" aria-hidden="true" tabindex="-1"></a><span class="co">      parseGeoraster(arrayBuffer).then(georaster =&gt; {</span></span>
<span id="cb2-234"><a href="#cb2-234" aria-hidden="true" tabindex="-1"></a><span class="co">        var layer = new GeoRasterLayer({</span></span>
<span id="cb2-235"><a href="#cb2-235" aria-hidden="true" tabindex="-1"></a><span class="co">          georaster: georaster,</span></span>
<span id="cb2-236"><a href="#cb2-236" aria-hidden="true" tabindex="-1"></a><span class="co">          opacity: opa,</span></span>
<span id="cb2-237"><a href="#cb2-237" aria-hidden="true" tabindex="-1"></a><span class="co">          pixelValuesToColorFn: colorfun,</span></span>
<span id="cb2-238"><a href="#cb2-238" aria-hidden="true" tabindex="-1"></a><span class="co">          resolution: 64</span></span>
<span id="cb2-239"><a href="#cb2-239" aria-hidden="true" tabindex="-1"></a><span class="co">        });</span></span>
<span id="cb2-240"><a href="#cb2-240" aria-hidden="true" tabindex="-1"></a><span class="co">        layer.addTo(map);</span></span>
<span id="cb2-241"><a href="#cb2-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-242"><a href="#cb2-242" aria-hidden="true" tabindex="-1"></a><span class="co">        // Fit the map bounds to the raster</span></span>
<span id="cb2-243"><a href="#cb2-243" aria-hidden="true" tabindex="-1"></a><span class="co">        map.setView([lat, lon], zoom);</span></span>
<span id="cb2-244"><a href="#cb2-244" aria-hidden="true" tabindex="-1"></a><span class="co">      });</span></span>
<span id="cb2-245"><a href="#cb2-245" aria-hidden="true" tabindex="-1"></a><span class="co">    }) </span></span>
<span id="cb2-246"><a href="#cb2-246" aria-hidden="true" tabindex="-1"></a><span class="co">}}</span></span>
<span id="cb2-247"><a href="#cb2-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-248"><a href="#cb2-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-249"><a href="#cb2-249" aria-hidden="true" tabindex="-1"></a><span class="co">{</span></span>
<span id="cb2-250"><a href="#cb2-250" aria-hidden="true" tabindex="-1"></a><span class="co">if (crTriggerIndex === 5) {</span></span>
<span id="cb2-251"><a href="#cb2-251" aria-hidden="true" tabindex="-1"></a><span class="co">  mapAmba(-34.6037, -58.3816, 10, 0, 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', getColor);</span></span>
<span id="cb2-252"><a href="#cb2-252" aria-hidden="true" tabindex="-1"></a><span class="co">} else if (crTriggerIndex === 6) {</span></span>
<span id="cb2-253"><a href="#cb2-253" aria-hidden="true" tabindex="-1"></a><span class="co">  mapAmba(-34.6037, -58.3816, 10, 0.3, 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', getColor);</span></span>
<span id="cb2-254"><a href="#cb2-254" aria-hidden="true" tabindex="-1"></a><span class="co">}  else if (crTriggerIndex === 7) {</span></span>
<span id="cb2-255"><a href="#cb2-255" aria-hidden="true" tabindex="-1"></a><span class="co">  mapAmba(-34.6037, -58.3816, 10, 0.5, 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', getCold);</span></span>
<span id="cb2-256"><a href="#cb2-256" aria-hidden="true" tabindex="-1"></a><span class="co">}  else if (crTriggerIndex === 5) {</span></span>
<span id="cb2-257"><a href="#cb2-257" aria-hidden="true" tabindex="-1"></a><span class="co">  mapAmba(-34.5912, -58.3717, 15, 0.7, 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', getCold);</span></span>
<span id="cb2-258"><a href="#cb2-258" aria-hidden="true" tabindex="-1"></a><span class="co">} else {</span></span>
<span id="cb2-259"><a href="#cb2-259" aria-hidden="true" tabindex="-1"></a><span class="co">  mapAmba(-34.6037, -58.3816, 15, 0.4, 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', getCold);</span></span>
<span id="cb2-260"><a href="#cb2-260" aria-hidden="true" tabindex="-1"></a><span class="co">} </span></span>
<span id="cb2-261"><a href="#cb2-261" aria-hidden="true" tabindex="-1"></a><span class="co">}</span></span>
<span id="cb2-262"><a href="#cb2-262" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cr-section cr-column-screen overlay-center">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-myimage2">
<div class="narrative">
<p>The emergence and persistence of vector-borne diseases is influenced by both ecological and human factors.</p>
</div>
</div>
<div class="trigger">
<div class="narrative">
<p>Human-to-human contact is a key factor in the spread of virus as COVID-19, especially in cities with high population density.</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-myimage2" class="sticky">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/covid.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Obelisco</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="cr-section cr-column-screen sidebar-left">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-graphic3">
<div class="narrative">
<p>This is Buenos Aires Metropolitan Area.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-graphic3">
<div class="narrative">
<p>We overlay one of the generated rasters, specifically the one from a Wednesday afternoon during Phase I of the lockdown in May 2020. Let’s observe that there are various pixel colors. What do they mean? Let’s find it out.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-graphic3" data-pan-to="30%,30%" data-scale-by="2">
<div class="narrative">
<p>The blue-tone pixels correspond to areas that experienced a decrease in mobility relative to the same period of the previous year. The more intense the color, the more pronounced the change. Let’s see which areas of the city were the most affected.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-graphic3" data-pan-to="50%,50%" data-scale-by="2">
<div class="narrative">
<p>4</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-graphic3" class="sticky">
<p><img src="img/amba_raster.png" class="img-fluid"></p>
</div>
</div>
</div>
</div>
<div class="cr-section cr-column-screen sidebar-left">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-azul1">
<div class="narrative">
<p>This is Buenos Aires Metropolitan Area.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-azul1">
<div class="narrative">
<p>We overlay one of the generated rasters, specifically the one from a Wednesday afternoon during Phase I of the lockdown in May 2020. Let’s observe that there are various pixel colors. What do they mean? Let’s find it out.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-azul1" data-pan-to="30%,30%" data-scale-by="2">
<div class="narrative">
<p>The blue-tone pixels correspond to areas that experienced a decrease in mobility relative to the same period of the previous year. The more intense the color, the more pronounced the change. Let’s see which areas of the city were the most affected.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-azul1" data-pan-to="50%,50%" data-scale-by="2">
<div class="narrative">
<p>4</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-azul1" class="sticky">
<p><img src="img/area_azul1.png" class="img-fluid"></p>
</div>
</div>
</div>
</div>
<div class="cr-section cr-column-screen overlay-center">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-bsas">
<div class="narrative">
<p>The emergence and persistence of vector-borne diseases is influenced by both ecological and human factors.</p>
</div>
</div>
<div class="trigger">
<div class="narrative">
<p>Human-to-human contact is a key factor in the spread of virus as COVID-19, especially in cities with high population density.</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-bsas" class="sticky">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/buenosaires_pandemia.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Obelisco</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="cr-section cr-column-screen sidebar-left">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-azul2">
<div class="narrative">
<p>This is Buenos Aires Metropolitan Area.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-azul2">
<div class="narrative">
<p>We overlay one of the generated rasters, specifically the one from a Wednesday afternoon during Phase I of the lockdown in May 2020. Let’s observe that there are various pixel colors. What do they mean? Let’s find it out.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-azul2" data-pan-to="30%,30%" data-scale-by="2">
<div class="narrative">
<p>The blue-tone pixels correspond to areas that experienced a decrease in mobility relative to the same period of the previous year. The more intense the color, the more pronounced the change. Let’s see which areas of the city were the most affected.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-azul1" data-pan-to="50%,50%" data-scale-by="2">
<div class="narrative">
<p>4</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-azul2" class="sticky">
<p><img src="img/area_azul2.png" class="img-fluid"></p>
</div>
</div>
</div>
</div>
<div class="cr-section cr-column-screen overlay-center">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-aero">
<div class="narrative">
<p>The emergence and persistence of vector-borne diseases is influenced by both ecological and human factors.</p>
</div>
</div>
<div class="trigger">
<div class="narrative">
<p>Human-to-human contact is a key factor in the spread of virus as COVID-19, especially in cities with high population density.</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-aero" class="sticky">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/aeropuerto.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Obelisco</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="cr-section cr-column-screen sidebar-left">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-naranja">
<div class="narrative">
<p>This is Buenos Aires Metropolitan Area.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-naranja">
<div class="narrative">
<p>We overlay one of the generated rasters, specifically the one from a Wednesday afternoon during Phase I of the lockdown in May 2020. Let’s observe that there are various pixel colors. What do they mean? Let’s find it out.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-naranja" data-pan-to="30%,30%" data-scale-by="2">
<div class="narrative">
<p>The blue-tone pixels correspond to areas that experienced a decrease in mobility relative to the same period of the previous year. The more intense the color, the more pronounced the change. Let’s see which areas of the city were the most affected.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-naranja" data-pan-to="50%,50%" data-scale-by="2">
<div class="narrative">
<p>4</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-naranja" class="sticky">
<p><img src="img/amba_raster.png" class="img-fluid"></p>
</div>
</div>
</div>
</div>
<div class="cr-section cr-column-screen overlay-center">
<div class="narrative-col">
<div class="progress-block">
<div class="trigger new-trigger" data-focus-on="cr-ventanas">
<div class="narrative">
<p>The emergence and persistence of vector-borne diseases is influenced by both ecological and human factors.</p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-ventanas">
<div class="narrative">
<p>Human-to-human contact is a key factor in the spread of virus as COVID-19, especially in cities with high population density.</p>
</div>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-ventanas" class="sticky">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/ventanas.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Obelisco</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
<p>To be continued…</p>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
</section>

</main>
<!-- /main column -->
<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"0\n/*\n\n\n\nmd`Active sticky: ${crActiveSticky}`\nmd`Trigger progress: ${crTriggerProgress}`\nmd`Scroll direction: ${crDirection}`\nmd`Progress Block progress: ${crProgressBlock}`\nmd`Active trigger: ${crTriggerIndex}`\n\nL = require(\"leaflet@1.9.4\");\nGeoTIFF = require('geotiff@2.0.4');\nparseGeoraster = require(\"georaster@1.6.0\");\nGeoRasterLayer = require(\"georaster-layer-for-leaflet@3.10.0\");\nhtml`<link href='${resolve('leaflet@1.9.4/dist/leaflet.css')}' rel='stylesheet' />`;\n\ncontainer = DOM.element('div', { style: `width:${width/1.5}px;height:${width / 2}px` });\nyield container;\n\nmap = L.map(container, {\n  center: [-34.6037, -58.3816],\n  zoom: 10,\n  scrollWheelZoom: false,\n});\n\nfunction getColor(values) {\n  if (values < -50) return \"#0000FF\";\n  if (values < -40) return \"#0040FF\";\n  if (values < -30) return \"#0080FF\";\n  if (values < -20) return \"#00BFFF\";\n  if (values < -10) return \"#00FFFF\";\n  if (values < 1 && values > -1) return \"#FFFFFF\"; // white\n  if (values > 10) return \"#FFCC00\";\n  if (values > 20) return \"#FF9900\";\n  if (values > 30) return \"#FF6600\";\n  if (values > 40) return \"#FF3300\";\n  if (values > 50) return \"#FF0000\";\n}\n\nfunction getCold(values) {\n  if (values < -50) return \"#0000FF\";\n  if (values < -40) return \"#0040FF\";\n  if (values < -30) return \"#0080FF\";\n  if (values < -20) return \"#00BFFF\";\n  if (values < -10) return \"#00FFFF\";\n  if (values > -1) return \"#FFFFFF00\"; // transparent\n}\n\n\nfunction mapAmba(lat, lon, zoom, opa, basemap, colorfun){\n\nL.tileLayer(basemap, {\n  attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n}).addTo(map);\n\nconst url_to_geotiff_file = 'static/amba_pc_2020-05-13_16.tif';\n\n{\n  fetch(url_to_geotiff_file)\n    .then(response => response.arrayBuffer())\n    .then(arrayBuffer => {\n      parseGeoraster(arrayBuffer).then(georaster => {\n        var layer = new GeoRasterLayer({\n          georaster: georaster,\n          opacity: opa,\n          pixelValuesToColorFn: colorfun,\n          resolution: 64\n        });\n        layer.addTo(map);\n\n        // Fit the map bounds to the raster\n        map.setView([lat, lon], zoom);\n      });\n    }) \n}}\n\n\n{\nif (crTriggerIndex === 5) {\n  mapAmba(-34.6037, -58.3816, 10, 0, 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', getColor);\n} else if (crTriggerIndex === 6) {\n  mapAmba(-34.6037, -58.3816, 10, 0.3, 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', getColor);\n}  else if (crTriggerIndex === 7) {\n  mapAmba(-34.6037, -58.3816, 10, 0.5, 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', getCold);\n}  else if (crTriggerIndex === 5) {\n  mapAmba(-34.5912, -58.3717, 15, 0.7, 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', getCold);\n} else {\n  mapAmba(-34.6037, -58.3816, 15, 0.4, 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', getCold);\n} \n}\n*/\n\n"}]}
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../..";
window._ojs.paths.runtimeToRoot = "../../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>